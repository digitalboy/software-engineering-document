## AI UML 架构师 - 前端设计指南 (浏览器/移动端).md

### 1. 引言：为前端 AI 构建结构与交互蓝图

本指南是《AI UML 架构师 - 总则》在**前端开发（浏览器 Web 应用及移动端 App）**场景下的具体应用。其目标是利用 AI，将需求和 MVP 验证成果转化为一套层次化、结构清晰、面向 AI 的文本 UML 规约，**专注于前端应用的界面结构、状态管理、用户交互流程和与后端 API 的通信**。

遵循总则，本文档旨在为下游 AI 工具（代码生成器、测试辅助工具）提供精确的输入，同时**明确排除详细的视觉设计和像素级布局**。

### 2. 核心原则回顾 (前端侧重)

*   **AI 优先, 文本 UML (PlantUML/Mermaid):** 为机器优化。
*   **分层细化 (L1-L3):** 从应用整体交互到内部组件结构。
*   **MECE:** 确保视图、状态、服务等职责清晰且覆盖核心功能。
*   **聚焦核心结构与行为:** 建模 MVP 范围内的关键视图、组件、状态、用户流程和 API 交互。
*   **明确边界:** **极其重要！** 本指南**不涉及**具体 UI 控件样式、CSS 布局细节、动画效果、复杂的 DOM 操作。这些应在编码阶段结合 UI 设计稿和 AI 代码助手处理。

### 3. 输入

同总则：需求描述、MVP 核心逻辑、**前端相关的 Spike 文档** (如 UI 框架选型、状态管理库集成、API Client 实现验证)、(可选) 前端核心示例代码。

### 4. 分层工作流 (前端视角)

*   **Level 0: 摄入与分析:** AI 理解需求、MVP 成果，识别前端应用的核心目标和用户。
*   **Level 1: 应用上下文层:**
    *   **AI 生成:**
        *   **用例图:** Actor 为**最终用户**，系统为**前端应用本身**，用例为用户能完成的核心任务（如“查看配方”、“提交评论”）。
        *   **上下文图 (C4 风格):** 展示**用户**通过设备与**前端应用**交互，以及**前端应用**与**后端 API**（作为外部系统）的交互。
    *   **验证:** 覆盖核心用户任务？清晰定义与后端的边界？
*   **Level 2: 关键视图/模块层:**
    *   **AI 分析:** 识别前端应用内部的主要逻辑区域，如**核心页面/视图 (Views)**、**共享组件库 (Shared Components - 逻辑分组)**、**状态管理模块 (State Stores)**、**路由配置 (Router)**、**API 服务层 (API Services)**。
    *   **AI 生成:**
        *   **组件图/包图:** 展示这些主要模块及其**高层依赖关系**（例如，视图依赖状态存储，状态存储依赖 API 服务）。
    *   **验证:** 模块划分是否合理？职责是否清晰？是否覆盖 L1 的用户任务实现所需的主要部分？
*   **Level 3: 内部细节层 (视图/组件/状态/服务):**
    *   **AI 分析:** 针对 L2 的**每个关键模块**进行细化。
    *   **AI 生成 (聚焦逻辑与交互):**
        *   **类图 (用于结构):**
            *   **状态存储 (如 Pinia/Redux Store):** 定义 State 的形状、Actions/Mutations/Reducers 的**签名**。
            *   **API 服务类/模块:** 定义调用后端 API 的**方法签名**和所需的数据结构 (DTOs - 可与后端共享定义)。
            *   **高层组件结构图 (可选):** 展示**关键视图如何组合主要逻辑组件**，以及它们之间大致的**数据流或事件传递关系** (Props/Events)，**避免具体 UI 控件细节**。
        *   **序列图 (用于交互):** **非常重要！** 描绘关键用户操作触发的流程：
            *   `用户交互 -> 视图/组件 -> (调用 Action) -> 状态存储 -> (发起 API 请求) -> API 服务 -> 后端 API`
            *   展示状态如何更新，以及更新后可能触发的 UI 变化（逻辑层面）。
        *   **状态机图 (可选，用于复杂组件):** 描述某个**具有复杂内部状态的逻辑组件**（如多步表单、向导）的状态转换。**不用来描述按钮的 hover/active 状态等。**
    *   **验证:** 类图/结构图是否反映核心数据和操作签名？序列图是否覆盖关键用户流程并体现状态管理和 API 调用？

### 5. 关键 UML 类型与前端焦点

*   **用例图 (L1):** 定义用户与前端应用的核心交互目的。
*   **组件图/包图 (L2):** 描绘前端代码库的宏观架构（视图、状态、服务等模块）。
*   **类图 (L3):** 主要用于定义 **State 结构、Action/Service 接口、高层组件组合关系**。
*   **序列图 (L3):** **核心！** 用于可视化**用户交互如何驱动状态变化和后端通信**。
*   **状态机图 (L3 - 可选):** 用于对具有复杂内部逻辑状态的**非 UI** 组件或逻辑单元建模。

### 6. 示例调整：“自酿啤酒社群”APP 前端

(参考《总则》中已修正的 `component_structure.puml` 和 `sequence_login.puml` 示例，它们已经体现了前端的边界意识)

*   **重点强调:** 生成的 UML **不会**包含 `<button>`, `<div>`, `className`, `style` 等具体实现细节。类图可能只定义 `RecipeCardDisplay` 这个逻辑概念及其需要的数据，序列图展示点击“添加到收藏”按钮后调用 `recipeStore.addToFavorites(recipeId)` 并触发 API 调用的流程。

### 7. 输出：给前端 AI 的结构化指令

*   一个层次化的包，包含各层级的 PlantUML/Mermaid 文件和注释。
*   **主要用途:** 驱动生成前端的**视图/页面骨架、状态管理代码 (Store/Reducer boilerplate)、API 服务层代码、路由配置**。**不直接生成完整的、带样式的 UI 组件。**

### 8. 结论

本前端设计指南利用 AI 和分层文本 UML，为自动化生成前端应用的核心结构、状态管理和交互逻辑提供了坚实基础。通过明确排除 UI 实现细节，它确保了 AI UML 架构师专注于其最擅长的领域，并为后续编码阶段的人机协作（特别是 UI 实现）留出了必要的空间和灵活性。

